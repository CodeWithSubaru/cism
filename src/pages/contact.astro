---
import Button from "../components/Button.astro";
import MainHeader from "../components/MainHeader.astro";
import Paragraph from "../components/Paragraph.astro";
import SubHeader from "../components/SubHeader.astro";
import Layout from "../layouts/Layout.astro";
import MiniLayout from "../layouts/MiniLayout.astro";
import Button from "../components/Button.astro";

import animate, { SERVICE_ID, TEMPLATE_ID, PUBLIC_KEY } from "../constants";
import emailjs from "@emailjs/browser";

if (Astro.request.method === "POST") {
  try {
    const response = await emailjs.sendForm(
      SERVICE_ID,
      TEMPLATE_ID,
      e.target,
      PUBLIC_KEY
    );

    console.log("SUCCESS!", response.text);
    alert("Hi");
  } catch (error) {
    console.log("FAILED...", error.text);
  }
}
---

<Layout title="Skills">
  <MiniLayout className="mt-24">
    <div class="px-4 py-10 overflow-hidden">
      <div class=`w-auto md:w-1/2 mx-auto ${animate}flipInX`>
        <MainHeader className="text-center" style="color: var(--accent)">
          Contact Me
        </MainHeader>

        <div class="relative">
          <small class="block text-sm font-extrabold mb-1"> Phone</small>
          <input
            class="inputCopy bg-[var(--secondary)] w-full pl-5 py-3 pr-10 rounded-lg mb-3 inline-block cursor-pointer overflow-y-auto outline-none"
            value="09678609851"
          />
          <div
            class="iconClip absolute right-1 top-1/2 -translate-y-[40%] px-2 bg-[var(--secondary)]"
          >
            <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
            <svg
              class="h-8 w-8 bg-[var(--primary)] p-1 rounded cursor-pointer"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M8 5.00005C7.01165 5.00082 6.49359 5.01338 6.09202 5.21799C5.71569 5.40973 5.40973 5.71569 5.21799 6.09202C5 6.51984 5 7.07989 5 8.2V17.8C5 18.9201 5 19.4802 5.21799 19.908C5.40973 20.2843 5.71569 20.5903 6.09202 20.782C6.51984 21 7.07989 21 8.2 21H15.8C16.9201 21 17.4802 21 17.908 20.782C18.2843 20.5903 18.5903 20.2843 18.782 19.908C19 19.4802 19 18.9201 19 17.8V8.2C19 7.07989 19 6.51984 18.782 6.09202C18.5903 5.71569 18.2843 5.40973 17.908 5.21799C17.5064 5.01338 16.9884 5.00082 16 5.00005M8 5.00005V7H16V5.00005M8 5.00005V4.70711C8 4.25435 8.17986 3.82014 8.5 3.5C8.82014 3.17986 9.25435 3 9.70711 3H14.2929C14.7456 3 15.1799 3.17986 15.5 3.5C15.8201 3.82014 16 4.25435 16 4.70711V5.00005"
                stroke="#666874"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"></path>
            </svg>
          </div>
        </div>

        <div class="relative mb-5">
          <small class="block text-sm font-extrabold mb-1"> Email</small>
          <input
            class="inputCopy bg-[var(--secondary)] w-full pl-5 py-3 pr-10 rounded-lg mb-3 inline-block cursor-pointer overflow-y-auto outline-none"
            value="francis.cloydm@gmail.com"
          />
          <div
            class="iconClip absolute right-1 top-1/2 -translate-y-[40%] px-2 bg-[var(--secondary)]"
          >
            <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
            <svg
              class="h-8 w-8 bg-[var(--primary)] p-1 rounded cursor-pointer"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M8 5.00005C7.01165 5.00082 6.49359 5.01338 6.09202 5.21799C5.71569 5.40973 5.40973 5.71569 5.21799 6.09202C5 6.51984 5 7.07989 5 8.2V17.8C5 18.9201 5 19.4802 5.21799 19.908C5.40973 20.2843 5.71569 20.5903 6.09202 20.782C6.51984 21 7.07989 21 8.2 21H15.8C16.9201 21 17.4802 21 17.908 20.782C18.2843 20.5903 18.5903 20.2843 18.782 19.908C19 19.4802 19 18.9201 19 17.8V8.2C19 7.07989 19 6.51984 18.782 6.09202C18.5903 5.71569 18.2843 5.40973 17.908 5.21799C17.5064 5.01338 16.9884 5.00082 16 5.00005M8 5.00005V7H16V5.00005M8 5.00005V4.70711C8 4.25435 8.17986 3.82014 8.5 3.5C8.82014 3.17986 9.25435 3 9.70711 3H14.2929C14.7456 3 15.1799 3.17986 15.5 3.5C15.8201 3.82014 16 4.25435 16 4.70711V5.00005"
                stroke="#666874"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"></path>
            </svg>
          </div>
        </div>

        <form
          class="contact-form bg-[var(--secondary)] rounded px-5 py-8 relative overflow-hidden"
          method="POST"
        >
          <span
            class="absolute -top-52 -right-16 -z-1 inline-block text-[rgba(102,104,116,0.1)] text-[20rem] rotate-[24deg]"
            >+</span
          >

          <span
            class="absolute left-44 top-20 inline-block text-[rgba(102,104,116,0.1)] text-[12rem] rotate-[30deg]"
            >o</span
          >

          <SubHeader className="md:mb-[0]" style="color: var(--accent)">
            Let's talk
          </SubHeader>
          <Paragraph>Discuss business with me</Paragraph>

          <div class="relative rounded-md">
            <label for="name" class="block text-xs">Name</label>
            <input
              type="text"
              name="name"
              placeholder="Eugene Viktor"
              class="input w-full rounded"
              autofocus
            />
          </div>

          <div class="relative rounded-md">
            <label for="email" class="block text-xs">Email</label>
            <input
              type="email"
              name="email"
              placeholder="youremail@gmail.com"
              class="input w-full rounded"
            />
          </div>

          <div class="relative rounded-md">
            <label for="message" class="block text-xs">Message</label>
            <textarea
              name="message"
              id="message"
              class="input resize-none w-full rounded"
              placeholder="Your message "></textarea>
          </div>

          <Button
            button
            classOrAnimate="animate-none w-full text-center bg-[var(--accent)] border-[0] text-white outline outline-3 outline-offset-4 outline-[var(--accent)] hover:bg-[var(--accent-alt)] hover:outline-[var(--accent-alt)]"
          >
            Sign In
          </Button>
        </form>
      </div>
    </div>
  </MiniLayout>
</Layout>

<style>
  .contact-form {
    outline: 3px solid var(--outline-color);
    outline-offset: 4px;
  }

  .contact-form {
    --outline-color: var(--secondary);
  }

  label {
    margin-bottom: 0.2rem;
    color: var(--text);
  }

  form > div {
    margin-bottom: 1.8rem;
    padding: 1rem;
    padding-bottom: 0;
  }

  form > div:has(input:focus),
  form > div:has(textarea:focus) {
    outline: 1px solid var(--primary);
    outline-offset: 4px;
  }

  form > div,
  .input {
    background: var(--primary);
  }

  .input {
    outline: none;
    border: none;
    color: var(--text-alt);
    padding-block: 1rem;
  }

  .input::placeholder {
    color: var(--text);
  }
</style>

<script>
  const input = document.querySelector(".inputCopy");
  const iconClip = document.querySelector(".iconClip");

  function myFunc() {
    // Select the text field
    input.select();
    input.setSelectionRange(0, 99999); // For mobile devices

    // Copy the text inside the text field
    navigator.clipboard.writeText(input.value);

    alert("Copied to clipboard");
  }

  input.addEventListener("click", myFunc);
  iconClip.addEventListener("click", myFunc);
</script>
